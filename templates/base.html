<!doctype html>
<html lang="tr">
<head>
    <meta charset="utf-8">
    <title>LoroLeng - AI Language Tutor</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&display=swap" rel="stylesheet">
    
    <!-- Bootstrap & Icons -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>

<!-- Modern Navbar -->
<nav class="main-navbar">
    <div class="container">
        <div class="navbar-inner">
            <!-- Logo -->
            <a class="navbar-logo" href="{{ url_for('dashboard') }}">
                <span class="logo-icon"></span>
                <span class="logo-text">LoroLeng</span>
            </a>
            
            {% if session.get('username') %}
            <!-- Ana Men羹 -->
            <ul class="nav-menu">
                <li class="nav-menu-item">
                    <a href="{{ url_for('dashboard') }}" class="nav-menu-link">
                        <i class="bi bi-house-door"></i>
                        <span>Ana Sayfa</span>
                    </a>
                </li>
                <li class="nav-menu-item">
                    <a href="{{ url_for('learn') }}" class="nav-menu-link learn-link">
                        <i class="bi bi-mortarboard-fill"></i>
                        <span>ren</span>
                    </a>
                </li>
                <li class="nav-menu-item dropdown">
                    <a href="#" class="nav-menu-link" data-bs-toggle="dropdown">
                        <i class="bi bi-book"></i>
                        <span>Pratik</span>
                        <i class="bi bi-chevron-down"></i>
                    </a>
                    <ul class="dropdown-menu modern-dropdown">
                        <li><a class="dropdown-item" href="{{ url_for('practice_word') }}">
                            <i class="bi bi-translate text-primary"></i> Kelime al覺
                        </a></li>
                        <li><a class="dropdown-item" href="{{ url_for('practice_sentence') }}">
                            <i class="bi bi-chat-text text-success"></i> C羹mle & Gramer
                        </a></li>
                        <li><a class="dropdown-item" href="{{ url_for('pronunciation') }}">
                            <i class="bi bi-mic text-danger"></i> Telaffuz
                        </a></li>
                    </ul>
                </li>
                <li class="nav-menu-item">
                    <a href="{{ url_for('leaderboard') }}" class="nav-menu-link">
                        <i class="bi bi-trophy"></i>
                        <span>S覺ralama</span>
                    </a>
                </li>
                <li class="nav-menu-item dropdown">
                    <a href="#" class="nav-menu-link" data-bs-toggle="dropdown">
                        <i class="bi bi-people"></i>
                        <span>Sosyal</span>
                        <i class="bi bi-chevron-down"></i>
                    </a>
                    <ul class="dropdown-menu modern-dropdown">
                        <li><a class="dropdown-item" href="{{ url_for('friends') }}">
                            <i class="bi bi-person-plus text-info"></i> Arkadalar
                        </a></li>
                        <li><a class="dropdown-item" href="{{ url_for('user_profile', user_id=session.get('user_id', 0)) }}">
                            <i class="bi bi-person-circle text-secondary"></i> Profilim
                        </a></li>
                    </ul>
                </li>
            </ul>
            
            <!-- Sa Men羹 -->
            <div class="nav-actions">
                <a href="{{ url_for('notifications') }}" class="nav-action-btn" title="Bildirimler">
                    <i class="bi bi-bell"></i>
                    <span class="notification-dot" id="notificationBadge" style="display: none;"></span>
                </a>
                <a href="{{ url_for('user_stats') }}" class="nav-action-btn" title="襤statistikler">
                    <i class="bi bi-bar-chart"></i>
                </a>
                <a href="{{ url_for('goals') }}" class="nav-action-btn" title="Hedefler">
                    <i class="bi bi-bullseye"></i>
                </a>
                
                <!-- Kullan覺c覺 -->
                <div class="nav-user dropdown">
                    <a href="#" class="nav-user-btn" data-bs-toggle="dropdown">
                        <div class="nav-user-avatar">{{ session.get('username', 'U')[0]|upper }}</div>
                        <span class="nav-user-name">{{ session.get('username') }}</span>
                        <i class="bi bi-chevron-down"></i>
                    </a>
                    <ul class="dropdown-menu dropdown-menu-end modern-dropdown">
                        <li><a class="dropdown-item" href="{{ url_for('user_profile', user_id=session.get('user_id', 0)) }}">
                            <i class="bi bi-person"></i> Profilim
                        </a></li>
                        <li><a class="dropdown-item" href="{{ url_for('user_stats') }}">
                            <i class="bi bi-graph-up"></i> 襤statistiklerim
                        </a></li>
                        <li><a class="dropdown-item" href="{{ url_for('goals') }}">
                            <i class="bi bi-flag"></i> Hedeflerim
                        </a></li>
                        <li><hr class="dropdown-divider"></li>
                        <li><a class="dropdown-item text-danger" href="{{ url_for('logout') }}">
                            <i class="bi bi-box-arrow-right"></i> 覺k覺 Yap
                        </a></li>
                    </ul>
                </div>
            </div>
            
            <!-- Mobile Toggle -->
            <button class="mobile-toggle" type="button" data-bs-toggle="collapse" data-bs-target="#mobileNav">
                <i class="bi bi-list"></i>
            </button>
            {% endif %}
        </div>
        
        <!-- Mobile Menu -->
        {% if session.get('username') %}
        <div class="collapse mobile-nav" id="mobileNav">
            <a href="{{ url_for('dashboard') }}" class="mobile-nav-link"><i class="bi bi-house-door"></i> Ana Sayfa</a>
            <a href="{{ url_for('learn') }}" class="mobile-nav-link"><i class="bi bi-mortarboard-fill"></i> ren</a>
            <a href="{{ url_for('practice_word') }}" class="mobile-nav-link"><i class="bi bi-translate"></i> Kelime al覺</a>
            <a href="{{ url_for('practice_sentence') }}" class="mobile-nav-link"><i class="bi bi-chat-text"></i> C羹mle & Gramer</a>
            <a href="{{ url_for('pronunciation') }}" class="mobile-nav-link"><i class="bi bi-mic"></i> Telaffuz</a>
            <a href="{{ url_for('leaderboard') }}" class="mobile-nav-link"><i class="bi bi-trophy"></i> S覺ralama</a>
            <a href="{{ url_for('friends') }}" class="mobile-nav-link"><i class="bi bi-people"></i> Arkadalar</a>
            <a href="{{ url_for('goals') }}" class="mobile-nav-link"><i class="bi bi-bullseye"></i> Hedefler</a>
            <a href="{{ url_for('logout') }}" class="mobile-nav-link text-danger"><i class="bi bi-box-arrow-right"></i> 覺k覺</a>
        </div>
        {% endif %}
    </div>
</nav>

<main class="main-content">
    <div class="container">
        {% block content %}{% endblock %}
    </div>
</main>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

{% if session.get('username') %}
<script>
// Bildirim say覺s覺n覺 g羹ncelle
function updateNotificationBadge() {
    fetch('/api/unread-notifications')
        .then(response => response.json())
        .then(data => {
            const badge = document.getElementById('notificationBadge');
            if (data.count > 0) {
                badge.style.display = 'block';
            } else {
                badge.style.display = 'none';
            }
        })
        .catch(err => console.log('Bildirim hatas覺:', err));
}

document.addEventListener('DOMContentLoaded', updateNotificationBadge);
setInterval(updateNotificationBadge, 30000);
</script>
{% endif %}

</body>
</html>
